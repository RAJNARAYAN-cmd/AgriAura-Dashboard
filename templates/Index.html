<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgriAura Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body class="text-gray-800">
    <!-- Header -->
    <header class="main-header sticky top-0 z-30">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-2">
                    <svg class="h-8 w-8 text-emerald-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z" /></svg>
                    <h1 class="text-2xl font-bold text-gray-900">AgriAura</h1>
                </div>
                <div class="text-sm text-gray-500">
                    Kothri Kalan, Madhya Pradesh, India | <span id="current-time"></span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8 space-y-8">
        <section class="card">
            <h2 class="text-xl font-bold text-gray-900 mb-1">Real-time Monitoring</h2>
            <p class="text-gray-500 mb-6">Live sensor data from your fields.</p>
            <div id="stats-loader" class="text-center py-8"><div class="loader"></div><p class="text-gray-500 mt-2">Loading live data...</p></div>
            <div id="stats-grid" class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6 hidden"></div>
            <div id="chart-container" class="chart-container hidden"><canvas id="sensor-chart"></canvas></div>
        </section>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-2 card">
                <h2 class="text-xl font-bold text-gray-900 mb-1">CO₂ Emission Predictor</h2>
                <p class="text-gray-500 mb-6">Use the AI model to predict CO₂ emissions based on new sensor data.</p>
                <form id="predict-form" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <input type="number" step="0.1" name="temperature" class="p-2 border rounded-md" placeholder="Temperature (°C)" required>
                    <input type="number" step="0.1" name="humidity" class="p-2 border rounded-md" placeholder="Humidity (%)" required>
                    <input type="number" step="0.1" name="soilMoisture" class="p-2 border rounded-md" placeholder="Soil Moisture" required>
                    <input type="number" step="0.1" name="nitrogen" class="p-2 border rounded-md" placeholder="Nitrogen (ppm)" required>
                    <input type="number" step="0.1" name="phosphorus" class="p-2 border rounded-md" placeholder="Phosphorus (ppm)" required>
                    <input type="number" step="0.1" name="potassium" class="p-2 border rounded-md" placeholder="Potassium (ppm)" required>
                    <input type="number" step="0.1" name="lightIntensity" class="p-2 border rounded-md" placeholder="Light (lux)" required>
                    <button type="submit" class="w-full bg-emerald-600 text-white font-semibold p-2 rounded-md hover:bg-emerald-700 transition md:col-span-2">Predict Emissions</button>
                </form>
                <div id="predict-result-container" class="mt-4 hidden">
                    <h3 class="font-semibold text-gray-800">Prediction Result:</h3>
                    <pre id="predict-result" class="mt-2 p-3 bg-gray-50 rounded-lg text-sm"></pre>
                </div>
            </div>
            <div class="card">
                 <h2 class="text-xl font-bold text-gray-900 mb-1">Record Data</h2>
                 <p class="text-gray-500 mb-6">Manually log new sensor readings.</p>
                 <form id="record-form" class="space-y-4">
                     <input type="number" step="0.1" name="temperature" class="w-full p-2 border rounded-md" placeholder="Temperature (°C)">
                     <input type="number" step="0.1" name="humidity" class="w-full p-2 border rounded-md" placeholder="Humidity (%)">
                     <input type="number" step="0.1" name="lightIntensity" class="w-full p-2 border rounded-md" placeholder="Light (lux)">
                     <input type="number" step="0.1" name="co2" class="w-full p-2 border rounded-md" placeholder="CO₂ (ppm)">
                     <button type="submit" class="w-full bg-gray-800 text-white font-semibold p-2 rounded-md hover:bg-gray-900 transition">Save Record</button>
                 </form>
                 <div id="record-message" class="mt-3"></div>
            </div>
        </div>
        
        <section class="card">
            <h2 class="text-xl font-bold text-gray-900 mb-1">Plugin Management</h2>
            <p class="text-gray-500 mb-6">Extend your AgriAura dashboard with powerful plugins.</p>
            <div class="tabs">
                <div class="tabs-list bg-gray-100 p-1 rounded-lg grid grid-cols-3 gap-1 mb-6">
                    <button data-tab="installed" class="tab-btn active">Installed</button>
                    <button data-tab="marketplace" class="tab-btn">Marketplace</button>
                    <button data-tab="settings" class="tab-btn">Settings</button>
                </div>
                <div id="installed-tab" class="tabs-content active"></div>
                <div id="marketplace-tab" class="tabs-content"></div>
                <div id="settings-tab" class="tabs-content"></div>
            </div>
        </section>

        <section class="card">
            <h2 class="text-xl font-bold text-gray-900 mb-1">Data Log</h2>
            <p class="text-gray-500 mb-6">A complete history of all recorded sensor data.</p>
            <div id="table-loader" class="text-center py-8"><div class="loader"></div><p class="text-gray-500 mt-2">Loading historical data...</p></div>
            <div class="overflow-x-auto hidden" id="table-container">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="th">Timestamp</th>
                            <th class="th">Temp (°C)</th>
                            <th class="th">Humidity (%)</th>
                            <th class="th">Light (lux)</th>
                            <th class="th">CO₂ (ppm)</th>
                        </tr>
                    </thead>
                    <tbody id="sensor-data-table" class="bg-white divide-y divide-gray-200"></tbody>
                </table>
            </div>
        </section>
    </main>
    <script src="/static/script.js"></script>
</body>
</html>

